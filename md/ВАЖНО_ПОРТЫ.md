# ‚ö†Ô∏è –í–ê–ñ–ù–û: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç–æ–≤

## üö´ –ó–∞–Ω—è—Ç—ã–µ –ø–æ—Ä—Ç—ã (–ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨):
- **443** - –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–æ–º
- **1593** - –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–æ–º

## ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ—Ä—Ç—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ:

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- **5000** - Backend API (Node.js/Express)
- **5173** - Frontend Dev Server (Vite)
- **5432** - PostgreSQL Database

### –î–ª—è Docker Production:
- **8080** - HTTP (–≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ 80)
- **8443** - HTTPS (–≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ 443)
- **5000** - Backend –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **5432** - PostgreSQL –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### –î–ª—è Render.com:
- Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –ø–æ—Ä—Ç —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PORT`
- –û–±—ã—á–Ω–æ —ç—Ç–æ –ø–æ—Ä—Ç 10000, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π

---

## üîß –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

### 1. Docker Compose —Ñ–∞–π–ª—ã:
- `docker-compose.production.yml`
- `server/CICD/docker-compose.production.yml`
- `server/CICD/docker-compose.ssl.yml`

**–ë—ã–ª–æ:**
```yaml
ports:
  - "80:80"
  - "443:443"
```

**–°—Ç–∞–ª–æ:**
```yaml
ports:
  - "8080:80"
  - "8443:443"
```

### 2. –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:

**–õ–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ Docker):**
- Frontend: `http://localhost:5173`
- Backend: `http://localhost:5000`

**–° Docker:**
- HTTP: `http://localhost:8080`
- HTTPS: `https://localhost:8443`

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (Render.com):**
- `https://autogreatfood.ru` (Render —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ä—Ç–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üìù Firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è VPS:

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä, –æ—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–∏ –ø–æ—Ä—Ç—ã:

```bash
# –î–ª—è SSH
sudo ufw allow 22/tcp

# –î–ª—è HTTP/HTTPS (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä—Ç—ã)
sudo ufw allow 8080/tcp
sudo ufw allow 8443/tcp

# –î–ª—è PostgreSQL (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø)
sudo ufw allow 5432/tcp

# –í–∫–ª—é—á–∏—Ç—å firewall
sudo ufw enable
```

---

## üåê Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ):

–ï—Å–ª–∏ —É –≤–∞—Å Nginx –∫–∞–∫ reverse proxy, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–∞–∫:

```nginx
server {
    listen 8080;
    server_name autogreatfood.ru;
    
    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

server {
    listen 8443 ssl http2;
    server_name autogreatfood.ru;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤:

### Windows:
```cmd
netstat -ano | findstr :8080
netstat -ano | findstr :8443
netstat -ano | findstr :5000
```

### Linux/Mac:
```bash
netstat -tlnp | grep -E ':(8080|8443|5000)'
# –∏–ª–∏
lsof -i :8080
lsof -i :8443
lsof -i :5000
```

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞:

### –õ–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ Docker):
```bash
# Backend
npm run server

# Frontend (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
npm run dev
```

### –° Docker:
```bash
# Production
docker-compose -f docker-compose.production.yml up -d

# –° SSL
docker-compose -f server/CICD/docker-compose.ssl.yml up -d
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û –¥–ª—è Render.com:

Render.com **–ù–ï** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç—ã 80/443/8080/8443!

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ù–∞–∑–Ω–∞—á–∞–µ—Ç —Å–≤–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç (–æ–±—ã—á–Ω–æ 10000)
2. –£–ø—Ä–∞–≤–ª—è–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
3. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π URL

–ü–æ—ç—Ç–æ–º—É –¥–ª—è Render –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```javascript
const PORT = process.env.PORT || 5000
```

–ò Render —Å–∞–º –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç!

---

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã 443 –∏ 1593 –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ–µ–∫—Ç–æ–º**
2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã 8080 –∏ 8443 —Å–≤–æ–±–æ–¥–Ω—ã**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Docker**: `docker logs school-canteen-backend`
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall**: `sudo ufw status`

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä—Ç—ã –∏ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –≤–∞—à–∏–º–∏ –∑–∞–Ω—è—Ç—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏ 443 –∏ 1593.
