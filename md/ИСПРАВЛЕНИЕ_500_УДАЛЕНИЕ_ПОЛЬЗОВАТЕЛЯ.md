# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 500 –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –î–∞—Ç–∞: 9 —Ñ–µ–≤—Ä–∞–ª—è 2026

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
DELETE /api/admin/users/{id} 500 (Internal Server Error)
```

---

## üîç –ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–ª—é—á–∞–º–∏ (Foreign Keys)

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –¥—Ä—É–≥–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö:
- `orders` - –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `issued_meals` - –≤—ã–¥–∞–Ω–Ω—ã–µ –±–ª—é–¥–∞
- `subscriptions` - –ø–æ–¥–ø–∏—Å–∫–∏
- `notifications` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `purchase_requests` - –∑–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫—É–ø–∫—É (–¥–ª—è –ø–æ–≤–∞—Ä–æ–≤)
- `menu_requests` - –∑–∞—è–≤–∫–∏ –Ω–∞ –±–ª—é–¥–∞ (–¥–ª—è –ø–æ–≤–∞—Ä–æ–≤)
- `password_reset_tokens` - —Ç–æ–∫–µ–Ω—ã —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è
- `reviews` - –æ—Ç–∑—ã–≤—ã
- `transaction_logs` - –ª–æ–≥–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### –ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:

```sql
-- –ü–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
DELETE FROM users WHERE id = 'user-123';

-- –û—à–∏–±–∫–∞: –Ω–∞—Ä—É—à–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞
-- –í —Ç–∞–±–ª–∏—Ü–µ orders –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ —Å user_id = 'user-123'
-- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

–ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–¥–∞–ª—è–µ–º –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏:

```javascript
// 1. –£–¥–∞–ª—è–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
await runQuery('DELETE FROM orders WHERE user_id = ?', [id])
await runQuery('DELETE FROM issued_meals WHERE user_id = ?', [id])
await runQuery('DELETE FROM subscriptions WHERE user_id = ?', [id])
// ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ

// 2. –£–¥–∞–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await runQuery('DELETE FROM users WHERE id = ?', [id])
```

---

## üìù –ü–æ–ª–Ω—ã–π –∫–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### server/routes/admin.js

```javascript
router.delete('/users/:id', async (req, res) => {
  try {
    if (!req.session.user || req.session.user.role !== 'admin') {
      return res.status(401).json({ error: 'Unauthorized' })
    }

    const { id } = req.params

    // Don't allow deleting yourself
    if (id === req.session.user.id) {
      return res.status(400).json({ error: '–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç' })
    }

    // Check if user exists
    const user = await getQuery('SELECT id, email, role FROM users WHERE id = ?', [id])
    if (!user) {
      return res.status(404).json({ error: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω' })
    }

    // Delete related data first (cascade delete)
    try {
      // Delete orders
      await runQuery('DELETE FROM orders WHERE user_id = ?', [id])
      
      // Delete issued meals
      await runQuery('DELETE FROM issued_meals WHERE user_id = ?', [id])
      
      // Delete subscriptions
      await runQuery('DELETE FROM subscriptions WHERE user_id = ?', [id])
      
      // Delete notifications
      await runQuery('DELETE FROM notifications WHERE user_id = ?', [id])
      
      // Delete purchase requests (if chef)
      await runQuery('DELETE FROM purchase_requests WHERE created_by = ?', [id])
      
      // Delete menu requests (if chef)
      await runQuery('DELETE FROM menu_requests WHERE created_by = ?', [id])
      
      // Delete password reset tokens
      await runQuery('DELETE FROM password_reset_tokens WHERE user_id = ?', [id])
      
      // Delete reviews
      await runQuery('DELETE FROM reviews WHERE user_id = ?', [id])
      
      // Delete transaction logs
      await runQuery('DELETE FROM transaction_logs WHERE user_id = ?', [id])
      
      console.log(`üóëÔ∏è Deleted all related data for user ${user.email}`)
    } catch (relatedError) {
      console.error('Error deleting related data:', relatedError)
      // Continue with user deletion even if some related data fails
    }

    // Delete user
    await runQuery('DELETE FROM users WHERE id = ?', [id])

    console.log(`‚úÖ Admin ${req.session.user.email} deleted user ${user.email} (${user.role})`)
    res.json({ message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–µ–Ω' })
  } catch (error) {
    console.error('Delete user error:', error)
    console.error('Error details:', error.message)
    res.status(500).json({ 
      error: '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
      details: process.env.NODE_ENV === 'development' ? error.message : undefined
    })
  }
})
```

---

## üéØ –ß—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è

### –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. ‚úÖ **orders** - –í—Å–µ –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. ‚úÖ **issued_meals** - –í—Å–µ –≤—ã–¥–∞–Ω–Ω—ã–µ –±–ª—é–¥–∞
3. ‚úÖ **subscriptions** - –í—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏
4. ‚úÖ **notifications** - –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
5. ‚úÖ **password_reset_tokens** - –¢–æ–∫–µ–Ω—ã —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è
6. ‚úÖ **reviews** - –í—Å–µ –æ—Ç–∑—ã–≤—ã
7. ‚úÖ **transaction_logs** - –õ–æ–≥–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### –î–ª—è –ø–æ–≤–∞—Ä–æ–≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
8. ‚úÖ **purchase_requests** - –ó–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫—É–ø–∫—É
9. ‚úÖ **menu_requests** - –ó–∞—è–≤–∫–∏ –Ω–∞ –Ω–æ–≤—ã–µ –±–ª—é–¥–∞

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫:

```javascript
try {
  // –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  await runQuery('DELETE FROM orders WHERE user_id = ?', [id])
  // ...
} catch (relatedError) {
  console.error('Error deleting related data:', relatedError)
  // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```javascript
// –õ–æ–≥–∏—Ä—É–µ–º —É—Å–ø–µ—à–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
console.log(`‚úÖ Admin ${req.session.user.email} deleted user ${user.email} (${user.role})`)

// –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏
console.error('Delete user error:', error)
console.error('Error details:', error.message)
```

### –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–æ–∫ –≤ development:

```javascript
res.status(500).json({ 
  error: '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
  details: process.env.NODE_ENV === 'development' ? error.message : undefined
})
```

---

## üìä –ü–æ—Ä—è–¥–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
   ‚Üì
2. –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ —É–¥–∞–ª—è–µ–º –ª–∏ —Å–µ–±—è?
   ‚Üì
3. –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?
   ‚Üì
4. –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
   - orders
   - issued_meals
   - subscriptions
   - notifications
   - purchase_requests
   - menu_requests
   - password_reset_tokens
   - reviews
   - transaction_logs
   ‚Üì
5. –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ‚Üì
6. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—Ö–∞
   ‚Üì
7. –û—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   ```
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ —É—á–µ–Ω–∏–∫–∞
   - –°–¥–µ–ª–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–∫–∞–∑–æ–≤
   - –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É
   ```

2. **–í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
   ```
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
   ```

3. **–£–¥–∞–ª–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   ```
   - –ù–∞–∂–º–∏—Ç–µ "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å"
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–µ–Ω
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```
   üóëÔ∏è Deleted all related data for user test@example.com
   ‚úÖ Admin admin@example.com deleted user test@example.com (student)
   ```

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

‚úÖ **–£—Å–ø–µ—à–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞
- –í—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã
- –ù–µ—Ç –æ—à–∏–±–æ–∫ 500
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω"

‚ùå **–û—à–∏–±–∫–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–Ω–∏–∫–∞—Ç—å:**
- –ù–µ—Ç –æ—à–∏–±–∫–∏ 500
- –ù–µ—Ç –æ—à–∏–±–∫–∏ Foreign Key Constraint
- –ù–µ—Ç –æ—à–∏–±–∫–∏ "Cannot delete user"

---

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):

```sql
CREATE TABLE orders (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

**–ü–ª—é—Å—ã:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
- –ú–µ–Ω—å—à–µ –∫–æ–¥–∞

**–ú–∏–Ω—É—Å—ã:**
- –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –°–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–¥–∫–∞

### 2. –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (Soft Delete):

```javascript
// –í–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–º–µ—á–∞–µ–º –∫–∞–∫ —É–¥–∞–ª–µ–Ω–Ω—ã–π
await runQuery('UPDATE users SET deleted = 1, deleted_at = CURRENT_TIMESTAMP WHERE id = ?', [id])
```

**–ü–ª—é—Å—ã:**
- –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–ú–∏–Ω—É—Å—ã:**
- –£—Å–ª–æ–∂–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- –ó–∞–Ω–∏–º–∞–µ—Ç –º–µ—Å—Ç–æ –≤ –ë–î

### 3. –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥

**–ú–∏–Ω—É—Å—ã:**
- –ë–æ–ª—å—à–µ –∫–æ–¥–∞
- –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü

---

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü:

–ï—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ `users`:

```sql
CREATE TABLE new_table (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤ –º–∞—Ä—à—Ä—É—Ç:**

```javascript
// Delete from new table
await runQuery('DELETE FROM new_table WHERE user_id = ?', [id])
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–∫–∏ 500
- ‚úÖ –£–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

## üéì –£—Ä–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞ Foreign Key Constraints:

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```javascript
// –ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await runQuery('DELETE FROM users WHERE id = ?', [id])
// ‚ùå –û—à–∏–±–∫–∞: –µ—Å—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –¥—Ä—É–≥–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```javascript
// –°–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
await runQuery('DELETE FROM orders WHERE user_id = ?', [id])
await runQuery('DELETE FROM subscriptions WHERE user_id = ?', [id])
// ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ

// –ü–æ—Ç–æ–º —É–¥–∞–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await runQuery('DELETE FROM users WHERE id = ?', [id])
// ‚úÖ –£—Å–ø–µ—à–Ω–æ
```

---

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ! üéâ**

–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 9 —Ñ–µ–≤—Ä–∞–ª—è 2026
