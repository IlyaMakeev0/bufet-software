# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞—è–≤–æ–∫

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –Ω–æ–≤–æ–µ –±–ª—é–¥–æ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ 500:
```
POST http://localhost:5000/api/admin/menu-requests/.../approve 500 (Internal Server Error)
```

–í –ª–æ–≥–∞—Ö:
```
SyntaxError: Unexpected token o in JSON at position 1
at JSON.parse (<anonymous>)
at file:///app/server/routes/admin.js:250:30
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

PostgreSQL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä—Å–∏—Ç JSONB –ø–æ–ª—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ö –∫–∞–∫ JavaScript –æ–±—ä–µ–∫—Ç—ã. –ü–æ–ø—ã—Ç–∫–∞ –≤—ã–∑–≤–∞—Ç—å `JSON.parse()` –Ω–∞ —É–∂–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–µ.

## üîß –†–µ—à–µ–Ω–∏–µ

–£–±—Ä–∞–Ω –ª–∏—à–Ω–∏–π `JSON.parse()` –¥–ª—è –ø–æ–ª—è `ingredients`.

**–î–æ:**
```javascript
const ingredients = JSON.parse(request.ingredients)
```

**–ü–æ—Å–ª–µ:**
```javascript
const ingredients = request.ingredients // JSONB already parsed by PostgreSQL
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ–¥–æ–±—Ä—è–µ—Ç –∑–∞—è–≤–∫—É
2. –ë–ª—é–¥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –º–µ–Ω—é –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–∞—Ç—ã
3. –í—Å–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —Å –±–ª—é–¥–æ–º
4. –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ "–æ–¥–æ–±—Ä–µ–Ω–∞"

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –∫–∞–∫ –ø–æ–≤–∞—Ä

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –ø–æ–≤–∞—Ä (–∫–æ–¥: **2222**)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"üçΩÔ∏è –ù–æ–≤—ã–µ –±–ª—é–¥–∞"**
3. –ù–∞–∂–º–∏—Ç–µ **"+ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –±–ª—é–¥–æ"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å"
   - –û–ø–∏—Å–∞–Ω–∏–µ: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–∞–ª–∞—Ç —Å –∫—É—Ä–∏—Ü–µ–π"
   - –¶–µ–Ω–∞: 180
   - –¢–∏–ø: –û–±–µ–¥
5. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:
   - –ö—É—Ä–∏—Ü–∞: 0.15 –∫–≥
   - –°–∞–ª–∞—Ç: 0.1 –∫–≥
   - –°—ã—Ä: 0.05 –∫–≥
   - –°–æ—É—Å: 0.03 –ª
6. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É

### 2. –û–¥–æ–±—Ä–∏—Ç–µ –∑–∞—è–≤–∫—É –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–∫–æ–¥: **0000**)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"üçΩÔ∏è –ù–æ–≤—ã–µ –±–ª—é–¥–∞"**
3. –ù–∞–π–¥–∏—Ç–µ –∑–∞—è–≤–∫—É "–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å"
4. –ù–∞–∂–º–∏—Ç–µ **"‚úì –û–¥–æ–±—Ä–∏—Ç—å"**
5. –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã:
   - –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞: —Å–µ–≥–æ–¥–Ω—è
   - –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é
6. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "–û—Ç–ª–∏—á–Ω–æ–µ –±–ª—é–¥–æ!"
7. –ù–∞–∂–º–∏—Ç–µ **"–û–¥–æ–±—Ä–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–µ–Ω—é"**
8. ‚úÖ –ó–∞—è–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–¥–æ–±—Ä–µ–Ω–∞ –±–µ–∑ –æ—à–∏–±–æ–∫

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–ª—é–¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –º–µ–Ω—é
docker exec school-canteen-db psql -U canteen_user -d school_canteen -c "SELECT day, name, price FROM menu WHERE name = '–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å' LIMIT 3;"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã
docker exec school-canteen-db psql -U canteen_user -d school_canteen -c "SELECT mi.ingredient_name, mi.quantity, mi.unit FROM menu_ingredients mi JOIN menu m ON mi.menu_id = m.id WHERE m.name = '–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å' LIMIT 5;"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏
docker exec school-canteen-db psql -U canteen_user -d school_canteen -c "SELECT name, status, admin_comment FROM menu_requests WHERE name = '–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å';"
```

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª
`server/routes/admin.js` - —Å—Ç—Ä–æ–∫–∞ 250

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ
–£–±—Ä–∞–Ω `JSON.parse()` –¥–ª—è JSONB –ø–æ–ª—è, —Ç–∞–∫ –∫–∞–∫ PostgreSQL –¥—Ä–∞–π–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä—Å–∏—Ç JSONB –≤ JavaScript –æ–±—ä–µ–∫—Ç—ã.

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
PostgreSQL JSONB –ø–æ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ JavaScript –æ–±—ä–µ–∫—Ç—ã –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–µ.

## ‚úÖ –°—Ç–∞—Ç—É—Å

- ‚úÖ –û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ
- ‚úÖ –û–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ë–ª—é–¥–∞ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –º–µ–Ω—é
- ‚úÖ –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è

## üîÑ –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

–ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F5), –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É —Å–Ω–æ–≤–∞!

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 24 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
