# ðŸš€ ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð¿Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐµ CI/CD Ð´Ð»Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° "Ð¨ÐºÐ¾Ð»ÑŒÐ½Ð°Ñ ÑÑ‚Ð¾Ð»Ð¾Ð²Ð°Ñ"

## ðŸ“‹ Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ

1. [ÐžÐ±Ð·Ð¾Ñ€ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹](#Ð¾Ð±Ð·Ð¾Ñ€-ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹)
2. [ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°](#Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ°-Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°)
3. [ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° GitHub](#Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°-github)
4. [Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ](#Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ-Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ)
5. [ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°](#Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°-ÑÐµÑ€Ð²ÐµÑ€Ð°)
6. [Ð”ÐµÐ¿Ð»Ð¾Ð¹](#Ð´ÐµÐ¿Ð»Ð¾Ð¹)
7. [ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³](#Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³)
8. [Troubleshooting](#troubleshooting)

---

## ðŸŽ¯ ÐžÐ±Ð·Ð¾Ñ€ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹

### ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub Repository                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Push to main/develop â†’ GitHub Actions Trigger   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GitHub Actions CI/CD                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Test   â”‚â†’ â”‚  Build   â”‚â†’ â”‚  Docker  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GitHub Container Registry                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Backend Image    â”‚  â”‚ Frontend Image   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Production Server (VPS)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Docker Compose                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚  â”‚PostgreSQLâ”‚  â”‚ Backend  â”‚  â”‚ Frontend â”‚       â”‚  â”‚
â”‚  â”‚  â”‚   :5432  â”‚  â”‚  :5000   â”‚  â”‚  :80/443 â”‚       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹

1. **Frontend** - React + Vite Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
2. **Backend** - Node.js + Express ÑÐµÑ€Ð²ÐµÑ€
3. **Database** - PostgreSQL
4. **Nginx** - Reverse proxy Ð¸ ÑÑ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
5. **Docker** - ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¸Ð·Ð°Ñ†Ð¸Ñ
6. **GitHub Actions** - CI/CD pipeline

---

## ðŸ“¦ ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

### Ð¨Ð°Ð³ 1: ÐŸÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ CI/CD

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ .github/workflows
mkdir -p .github/workflows

# ÐŸÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚Ðµ workflow Ñ„Ð°Ð¹Ð»
mv CICD/.github-workflows-ci-cd.yml .github/workflows/ci-cd.yml

# Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ docker-compose Ð² ÐºÐ¾Ñ€ÐµÐ½ÑŒ
cp CICD/docker-compose.production.yml ./docker-compose.production.yml
```

### Ð¨Ð°Ð³ 2: Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .dockerignore Ð² ÐºÐ¾Ñ€Ð½Ðµ

```bash
cp CICD/.dockerignore ./.dockerignore
```

### Ð¨Ð°Ð³ 3: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
school-canteen/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci-cd.yml          â† GitHub Actions workflow
â”œâ”€â”€ CICD/
â”‚   â”œâ”€â”€ Dockerfile.backend     â† Backend Dockerfile
â”‚   â”œâ”€â”€ Dockerfile.frontend    â† Frontend Dockerfile
â”‚   â”œâ”€â”€ nginx.production.conf  â† Nginx ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ
â”‚   â””â”€â”€ docker-compose.production.yml
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ database.js
â”‚   â”œâ”€â”€ routes/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.jsx
â”‚   â”œâ”€â”€ App.jsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â”œâ”€â”€ .dockerignore
â””â”€â”€ docker-compose.production.yml
```

---

## ðŸ”§ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° GitHub

### Ð¨Ð°Ð³ 1: Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ GitHub Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹

```bash
# Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ git (ÐµÑÐ»Ð¸ ÐµÑ‰Ðµ Ð½Ðµ ÑÐ´ÐµÐ»Ð°Ð½Ð¾)
git init

# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ remote
git remote add origin https://github.com/Ð²Ð°Ñˆ-username/school-canteen.git

# ÐŸÐµÑ€Ð²Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚
git add .
git commit -m "Initial commit with CI/CD setup"
git push -u origin main
```

### Ð¨Ð°Ð³ 2: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ GitHub Secrets

ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð²: **Settings â†’ Secrets and variables â†’ Actions â†’ New repository secret**

Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑÐµÐºÑ€ÐµÑ‚Ñ‹:

#### Ð”Ð»Ñ Ð´ÐµÐ¿Ð»Ð¾Ñ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€:
```
SSH_HOST          = IP Ð°Ð´Ñ€ÐµÑ Ð²Ð°ÑˆÐµÐ³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð° (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: 192.168.1.100)
SSH_USER          = Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ SSH (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: root Ð¸Ð»Ð¸ ubuntu)
SSH_PRIVATE_KEY   = Ð¿Ñ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¹ SSH ÐºÐ»ÑŽÑ‡ (ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ ~/.ssh/id_rsa)
SSH_PORT          = Ð¿Ð¾Ñ€Ñ‚ SSH (Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ 22)
```

#### Ð”Ð»Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ:
```
DB_USER               = canteen_user
DB_PASSWORD           = Ð²Ð°Ñˆ_Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ð¹_Ð¿Ð°Ñ€Ð¾Ð»ÑŒ
SESSION_SECRET        = ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ_ÑÑ‚Ñ€Ð¾ÐºÐ°_Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼_32_ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
JWT_SECRET            = ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ_ÑÑ‚Ñ€Ð¾ÐºÐ°_Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼_32_ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
JWT_REFRESH_SECRET    = ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ_ÑÑ‚Ñ€Ð¾ÐºÐ°_Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼_32_ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
ENCRYPTION_KEY        = ÑÑ‚Ñ€Ð¾ÐºÐ°_Ñ€Ð¾Ð²Ð½Ð¾_32_ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
EMAIL_HOST            = smtp.gmail.com
EMAIL_PORT            = 587
EMAIL_USER            = Ð²Ð°Ñˆ-email@gmail.com
EMAIL_PASSWORD        = Ð¿Ð°Ñ€Ð¾Ð»ÑŒ_Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ_gmail
FRONTEND_URL          = https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.com
BACKEND_URL           = https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.com
```

### Ð¨Ð°Ð³ 3: Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÑÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ñ… ÐºÐ»ÑŽÑ‡ÐµÐ¹

```bash
# Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ñ… ÑÑ‚Ñ€Ð¾Ðº Ð´Ð»Ñ ÑÐµÐºÑ€ÐµÑ‚Ð¾Ð²
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ 3 Ñ€Ð°Ð·Ð° Ð´Ð»Ñ SESSION_SECRET, JWT_SECRET, JWT_REFRESH_SECRET
```

### Ð¨Ð°Ð³ 4: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSH ÐºÐ»ÑŽÑ‡Ð°

```bash
# ÐÐ° Ð²Ð°ÑˆÐµÐ¼ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ðµ
ssh-keygen -t ed25519 -C "github-actions"

# Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€
ssh-copy-id -i ~/.ssh/id_ed25519.pub user@your-server-ip

# Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿Ñ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ð´Ð»Ñ GitHub Secrets
cat ~/.ssh/id_ed25519
# Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ð² SSH_PRIVATE_KEY secret
```

---

## ðŸ§ª Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

### Ð¢ÐµÑÑ‚ 1: Ð¡Ð±Ð¾Ñ€ÐºÐ° Backend Docker Ð¾Ð±Ñ€Ð°Ð·Ð°

```bash
# Ð¡Ð¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¾Ð±Ñ€Ð°Ð·
docker build -f CICD/Dockerfile.backend -t school-canteen-backend:test .

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
docker run -p 5000:5000 \
  -e DB_HOST=host.docker.internal \
  -e DB_PORT=5432 \
  -e DB_NAME=school_canteen \
  -e DB_USER=canteen_user \
  -e DB_PASSWORD=your_password \
  school-canteen-backend:test

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ
curl http://localhost:5000/api/menu
```

### Ð¢ÐµÑÑ‚ 2: Ð¡Ð±Ð¾Ñ€ÐºÐ° Frontend Docker Ð¾Ð±Ñ€Ð°Ð·Ð°

```bash
# Ð¡Ð¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¾Ð±Ñ€Ð°Ð·
docker build -f CICD/Dockerfile.frontend -t school-canteen-frontend:test .

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
docker run -p 8080:80 school-canteen-frontend:test

# ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ
open http://localhost:8080
```

### Ð¢ÐµÑÑ‚ 3: ÐŸÐ¾Ð»Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ñ Docker Compose

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env Ñ„Ð°Ð¹Ð»
cp CICD/.env.example .env
# ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ .env Ñ Ð²Ð°ÑˆÐ¸Ð¼Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÑÐ¼Ð¸

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð²ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹
docker-compose -f docker-compose.production.yml up -d

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸
docker-compose -f docker-compose.production.yml logs -f

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ
docker-compose -f docker-compose.production.yml ps

# ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
open http://localhost
```

### Ð¢ÐµÑÑ‚ 4: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²

```bash
# Backend health
curl http://localhost:5000/api/menu

# Frontend health
curl http://localhost/

# Database health
docker exec school-canteen-db pg_isready -U canteen_user

# Ð’ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹
docker-compose -f docker-compose.production.yml ps
```

---

## ðŸ–¥ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ

- **OS**: Ubuntu 20.04+ / Debian 11+ / CentOS 8+
- **RAM**: ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 2GB (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ 4GB)
- **CPU**: 2 ÑÐ´Ñ€Ð°
- **Ð”Ð¸ÑÐº**: 20GB ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¼ÐµÑÑ‚Ð°
- **Ð¡ÐµÑ‚ÑŒ**: ÐŸÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ IP Ð°Ð´Ñ€ÐµÑ

### Ð¨Ð°Ð³ 1: ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ

```bash
ssh user@your-server-ip
```

### Ð¨Ð°Ð³ 2: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Docker

```bash
# ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ
sudo apt update && sudo apt upgrade -y

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
sudo apt install -y apt-transport-https ca-certificates curl software-properties-common

# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Docker GPG ÐºÐ»ÑŽÑ‡
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Docker Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ docker
sudo usermod -aG docker $USER

# ÐŸÐµÑ€ÐµÐ»Ð¾Ð³Ð¸Ð½ÑŒÑ‚ÐµÑÑŒ
exit
ssh user@your-server-ip

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ
docker --version
docker compose version
```

### Ð¨Ð°Ð³ 3: Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ
sudo mkdir -p /opt/school-canteen
sudo chown $USER:$USER /opt/school-canteen
cd /opt/school-canteen

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
touch .env
touch docker-compose.production.yml
```

### Ð¨Ð°Ð³ 4: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Firewall

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ UFW (ÐµÑÐ»Ð¸ Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½)
sudo apt install -y ufw

# Ð Ð°Ð·Ñ€ÐµÑˆÐ¸Ñ‚Ðµ SSH
sudo ufw allow 22/tcp

# Ð Ð°Ð·Ñ€ÐµÑˆÐ¸Ñ‚Ðµ HTTP Ð¸ HTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ firewall
sudo ufw enable

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ
sudo ufw status
```

### Ð¨Ð°Ð³ 5: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ SSL (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾, Ð½Ð¾ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Certbot
sudo apt install -y certbot

# ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚ (Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½)
sudo certbot certonly --standalone -d your-domain.com -d www.your-domain.com

# Ð¡ÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ Ð±ÑƒÐ´ÑƒÑ‚ Ð² /etc/letsencrypt/live/your-domain.com/

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð°Ð²Ñ‚Ð¾Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ
sudo certbot renew --dry-run
```

---

## ðŸš€ Ð”ÐµÐ¿Ð»Ð¾Ð¹

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð´ÐµÐ¿Ð»Ð¾Ð¹ Ñ‡ÐµÑ€ÐµÐ· GitHub Actions

1. **Ð¡Ð´ÐµÐ»Ð°Ð¹Ñ‚Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² ÐºÐ¾Ð´Ðµ**
2. **Ð—Ð°ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚ÑŒÑ‚Ðµ Ð¸ Ð·Ð°Ð¿ÑƒÑˆÑŒÑ‚Ðµ Ð² main**

```bash
git add .
git commit -m "Update feature"
git push origin main
```

3. **GitHub Actions Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸:**
   - Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ Ñ‚ÐµÑÑ‚Ñ‹
   - Ð¡Ð¾Ð±ÐµÑ€ÐµÑ‚ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
   - Ð¡Ð¾Ð·Ð´Ð°ÑÑ‚ Docker Ð¾Ð±Ñ€Ð°Ð·Ñ‹
   - Ð—Ð°Ð´ÐµÐ¿Ð»Ð¾Ð¸Ñ‚ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€

4. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð² GitHub:**
   - ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² **Actions** tab
   - ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ workflow run
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ job

### Ð ÑƒÑ‡Ð½Ð¾Ð¹ Ð´ÐµÐ¿Ð»Ð¾Ð¹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€

```bash
# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ
ssh user@your-server-ip

# ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
cd /opt/school-canteen

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ docker-compose.production.yml
# (ÑÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ð¸Ð· CICD/docker-compose.production.yml)

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env Ñ„Ð°Ð¹Ð» Ñ ÑÐµÐºÑ€ÐµÑ‚Ð°Ð¼Ð¸
nano .env
# Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð²ÑÐµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

# Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Ð¾Ð±Ñ€Ð°Ð·Ñ‹
docker compose -f docker-compose.production.yml pull

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐµÑ€Ð²Ð¸ÑÑ‹
docker compose -f docker-compose.production.yml up -d

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ
docker compose -f docker-compose.production.yml ps

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸
docker compose -f docker-compose.production.yml logs -f
```

### ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

```bash
# Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ðµ Ð¾Ð±Ñ€Ð°Ð·Ñ‹
docker compose -f docker-compose.production.yml pull

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐµÑ€Ð²Ð¸ÑÑ‹ (zero-downtime)
docker compose -f docker-compose.production.yml up -d --no-deps --build

# Ð£Ð´Ð°Ð»Ð¸Ñ‚Ðµ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð¾Ð±Ñ€Ð°Ð·Ñ‹
docker image prune -af
```

---

## ðŸ“Š ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ° ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²

```bash
# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð²ÑÐµÑ… ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
docker compose -f docker-compose.production.yml ps

# Ð›Ð¾Ð³Ð¸ Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
docker compose -f docker-compose.production.yml logs -f

# Ð›Ð¾Ð³Ð¸ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²Ð¸ÑÐ°
docker compose -f docker-compose.production.yml logs -f backend
docker compose -f docker-compose.production.yml logs -f frontend
docker compose -f docker-compose.production.yml logs -f postgres

# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²
docker stats
```

### Health Checks

```bash
# Backend API
curl http://localhost:5000/api/menu

# Frontend
curl http://localhost/

# Database
docker exec school-canteen-db pg_isready -U canteen_user

# Nginx
docker exec school-canteen-frontend nginx -t
```

### ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð»Ð¾Ð³Ð¾Ð²

```bash
# ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 100 ÑÑ‚Ñ€Ð¾Ðº
docker compose -f docker-compose.production.yml logs --tail=100

# Ð›Ð¾Ð³Ð¸ Ð·Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ñ‡Ð°Ñ
docker compose -f docker-compose.production.yml logs --since 1h

# Ð¡Ð»ÐµÐ´Ð¸Ñ‚ÑŒ Ð·Ð° Ð»Ð¾Ð³Ð°Ð¼Ð¸ Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
docker compose -f docker-compose.production.yml logs -f --tail=50
```

---

## ðŸ› Troubleshooting

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Backend Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼Ñ‹:**
```
Error: connect ECONNREFUSED postgres:5432
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ PostgreSQL Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½
docker compose -f docker-compose.production.yml ps postgres

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ PostgreSQL
docker compose -f docker-compose.production.yml logs postgres

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ PostgreSQL
docker compose -f docker-compose.production.yml restart postgres

# ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸Ñ‚Ðµ 10 ÑÐµÐºÑƒÐ½Ð´ Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ backend
sleep 10
docker compose -f docker-compose.production.yml restart backend
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Frontend Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð¾ÑˆÐ¸Ð±ÐºÑƒ 502

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼Ñ‹:**
```
502 Bad Gateway
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ backend Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½
docker compose -f docker-compose.production.yml ps backend

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ backend
docker compose -f docker-compose.production.yml logs backend

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ nginx ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
docker exec school-canteen-frontend nginx -t

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ frontend
docker compose -f docker-compose.production.yml restart frontend
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð½Ðµ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ÑÑ

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼Ñ‹:**
```
relation "users" does not exist
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð²ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹
docker compose -f docker-compose.production.yml down

# Ð£Ð´Ð°Ð»Ð¸Ñ‚Ðµ volume Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
docker volume rm school-canteen_postgres_data

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð·Ð°Ð½Ð¾Ð²Ð¾ (Ð±Ð°Ð·Ð° ÑÐ¾Ð·Ð´Ð°ÑÑ‚ÑÑ Ñ Ð½ÑƒÐ»Ñ)
docker compose -f docker-compose.production.yml up -d

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
docker compose -f docker-compose.production.yml logs postgres
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: GitHub Actions Ð¿Ð°Ð´Ð°ÐµÑ‚ Ð½Ð° Ð´ÐµÐ¿Ð»Ð¾Ðµ

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼Ñ‹:**
```
Permission denied (publickey)
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ SSH_PRIVATE_KEY Ð² GitHub Secrets
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ SSH_HOST Ð¸ SSH_USER

```bash
# ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ authorized_keys
cat ~/.ssh/authorized_keys

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ñ€Ð°Ð²Ð°
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: ÐžÐ±Ñ€Ð°Ð·Ñ‹ Ð½Ðµ ÑÐ¾Ð±Ð¸Ñ€Ð°ÑŽÑ‚ÑÑ

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼Ñ‹:**
```
Error: Cannot find module 'express'
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ package.json Ð² ÐºÐ¾Ñ€Ð½Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
ls -la package.json

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ .dockerignore
cat .dockerignore

# Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ node_modules Ð½Ðµ ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐµÑ‚ÑÑ
# ÐŸÐµÑ€ÐµÑÐ¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¾Ð±Ñ€Ð°Ð· Ñ --no-cache
docker build --no-cache -f CICD/Dockerfile.backend -t test .
```

---

## ðŸ“š Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÑÑƒÑ€ÑÑ‹

### ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Docker

```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹
docker compose -f docker-compose.production.yml down

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ volumes
docker compose -f docker-compose.production.yml down -v

# ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð·Ñ‹
docker compose -f docker-compose.production.yml build --no-cache

# Ð’Ð¾Ð¹Ñ‚Ð¸ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
docker exec -it school-canteen-backend sh
docker exec -it school-canteen-db psql -U canteen_user -d school_canteen

# Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
docker exec school-canteen-db pg_dump -U canteen_user school_canteen > backup.sql

# Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
docker exec -i school-canteen-db psql -U canteen_user school_canteen < backup.sql
```

### ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸

```bash
# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²
docker stats --no-stream

# Ð Ð°Ð·Ð¼ÐµÑ€ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²
docker images

# Ð Ð°Ð·Ð¼ÐµÑ€ volumes
docker system df -v

# ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð½ÐµÐ¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ñ… Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²
docker system prune -af
```

---

## âœ… Ð§ÐµÐº-Ð»Ð¸ÑÑ‚ Ð³Ð¾Ñ‚Ð¾Ð²Ð½Ð¾ÑÑ‚Ð¸

- [ ] Ð¤Ð°Ð¹Ð»Ñ‹ CI/CD Ð¿ÐµÑ€ÐµÐ¼ÐµÑ‰ÐµÐ½Ñ‹ Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
- [ ] GitHub Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ ÑÐ¾Ð·Ð´Ð°Ð½
- [ ] GitHub Secrets Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹
- [ ] SSH ÐºÐ»ÑŽÑ‡Ð¸ ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹
- [ ] Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾Ð¹Ð´ÐµÐ½Ð¾
- [ ] Ð¡ÐµÑ€Ð²ÐµÑ€ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð»ÐµÐ½ (Docker ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½)
- [ ] Firewall Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½
- [ ] SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ñ‹ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
- [ ] ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ð´ÐµÐ¿Ð»Ð¾Ð¹ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾
- [ ] Health checks Ð¿Ñ€Ð¾Ñ…Ð¾Ð´ÑÑ‚
- [ ] ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½

---

**Ð“Ð¾Ñ‚Ð¾Ð²Ð¾! Ð’Ð°ÑˆÐ° CI/CD ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð° Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚! ðŸŽ‰**

ÐŸÑ€Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ½Ð¾Ð²ÐµÐ½Ð¸Ð¸ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð¾Ð±Ñ€Ð°Ñ‰Ð°Ð¹Ñ‚ÐµÑÑŒ Ðº Ñ€Ð°Ð·Ð´ÐµÐ»Ñƒ Troubleshooting Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐ¹Ñ‚Ðµ Ð»Ð¾Ð³Ð¸ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð².
