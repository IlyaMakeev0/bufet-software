# üì± –°–∏—Å—Ç–µ–º–∞ QR-–∫–æ–¥–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–∏—Å—Ç–µ–º–∞ QR-–∫–æ–¥–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —à–∫–æ–ª—å–Ω–æ–π —Å—Ç–æ–ª–æ–≤–æ–π.

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –î–ª—è —É—á–µ–Ω–∏–∫–æ–≤ (StudentDashboard):
1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–∞** –¥–ª—è –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ QR-–∫–æ–¥–∞** –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
3. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ä–æ–∫–µ –¥–µ–π—Å—Ç–≤–∏—è** (24 —á–∞—Å–∞)
4. **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è –ø–æ–≤–∞—Ä–æ–≤ (ChefDashboard):
1. **–°–∫–∞–Ω–µ—Ä QR-–∫–æ–¥–æ–≤** —Å —Ä—É—á–Ω—ã–º –≤–≤–æ–¥–æ–º
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è QR-–∫–æ–¥–∞** –ø–µ—Ä–µ–¥ –≤—ã–¥–∞—á–µ–π
3. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏** –æ –∑–∞–∫–∞–∑–µ
4. **–í—ã–¥–∞—á–∞ –∑–∞–∫–∞–∑–∞** –ø–æ QR-–∫–æ–¥—É
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ** –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ —Å–æ —Å–∫–ª–∞–¥–∞

## üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –£—á–µ–Ω–∏–∫:
1. –û–ø–ª–∞—Ç–∏—Ç–µ –∑–∞–∫–∞–∑
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ó–∞–∫–∞–∑—ã"
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üì± –ü–æ–∫–∞–∑–∞—Ç—å QR" –Ω–∞–ø—Ä–æ—Ç–∏–≤ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
4. –ü–æ–∫–∞–∂–∏—Ç–µ QR-–∫–æ–¥ –ø–æ–≤–∞—Ä—É
5. –ü–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–π –∑–∞–∫–∞–∑

### –ü–æ–≤–∞—Ä:
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üì± –û—Ç–∫—Ä—ã—Ç—å —Å–∫–∞–Ω–µ—Ä" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏
2. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞ –ø–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥
3. –í—Å—Ç–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ QR-–∫–æ–¥–∞ –≤ –ø–æ–ª–µ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
4. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–∞–∑–µ
6. –ù–∞–∂–º–∏—Ç–µ "‚úì –í—ã–¥–∞—Ç—å –∑–∞–∫–∞–∑"

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Backend (API):
- `POST /api/qrcode/generate/order/:orderId` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–∞ –¥–ª—è –∑–∞–∫–∞–∑–∞
- `POST /api/qrcode/validate` - –í–∞–ª–∏–¥–∞—Ü–∏—è QR-–∫–æ–¥–∞
- `POST /api/qrcode/issue/:orderId` - –í—ã–¥–∞—á–∞ –∑–∞–∫–∞–∑–∞ –ø–æ QR-–∫–æ–¥—É
- `POST /api/qrcode/generate/subscription/:subscriptionId` - QR –¥–ª—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω (64 —Å–∏–º–≤–æ–ª–∞ hex)
- ‚úÖ –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 24 —á–∞—Å–∞ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 7 –¥–Ω–µ–π –¥–ª—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≤—ã–¥–∞—á–∏
- ‚úÖ –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—ã:
- `orders.qr_token` - –¢–æ–∫–µ–Ω QR-–∫–æ–¥–∞
- `orders.qr_expires_at` - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
- `orders.issued_at` - –í—Ä–µ–º—è –≤—ã–¥–∞—á–∏
- `orders.issued_by` - ID –ø–æ–≤–∞—Ä–∞
- `subscriptions.qr_token` - –¢–æ–∫–µ–Ω –¥–ª—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
- `subscriptions.qr_expires_at` - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "qrcode": "^1.5.4",           // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  "qrcode.react": "^4.2.0",     // React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  "html5-qrcode": "^2.3.8"      // –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)
}
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
apply-qr-fields.bat
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
sqlite3 school_canteen.db < add-qr-code-fields.sql
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:
```bash
npm run server
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:
```bash
npm run dev
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–∞ (—Å—Ç—É–¥–µ–Ω—Ç):
```javascript
const generateOrderQR = async (orderId) => {
  const res = await fetch(`/api/qrcode/generate/order/${orderId}`, {
    method: 'POST'
  })
  const data = await res.json()
  // data.qrCode - Data URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è QR-–∫–æ–¥–∞
  // data.expiresAt - –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è QR-–∫–æ–¥–∞ (–ø–æ–≤–∞—Ä):
```javascript
const validateQR = async (qrData) => {
  const res = await fetch('/api/qrcode/validate', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ qrData })
  })
  const data = await res.json()
  // data.valid - true/false
  // data.order - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ
}
```

### –í—ã–¥–∞—á–∞ –∑–∞–∫–∞–∑–∞ (–ø–æ–≤–∞—Ä):
```javascript
const issueOrder = async (orderId) => {
  const res = await fetch(`/api/qrcode/issue/${orderId}`, {
    method: 'POST'
  })
  const data = await res.json()
  // data.success - true/false
  // data.message - –°–æ–æ–±—â–µ–Ω–∏–µ
}
```

## üé® UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ QR-–∫–æ–¥–∞ (—Å—Ç—É–¥–µ–Ω—Ç):
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ QR-–∫–æ–¥–∞ (300x300px)
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ä–æ–∫–µ –¥–µ–π—Å—Ç–≤–∏—è
- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è

### –°–∫–∞–Ω–µ—Ä QR-–∫–æ–¥–æ–≤ (–ø–æ–≤–∞—Ä):
- –û–±–ª–∞—Å—Ç—å –¥–ª—è –∫–∞–º–µ—Ä—ã (–±—É–¥—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
- –ü–æ–ª–µ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ
- –ö–Ω–æ–ø–∫–∞ –≤—ã–¥–∞—á–∏

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è html5-qrcode –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ò—Å—Ç–æ—Ä–∏—è QR-–∫–æ–¥–æ–≤** - –ñ—É—Ä–Ω–∞–ª –≤—Å–µ—Ö —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤
3. **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞ –æ –≤—ã–¥–∞—á–µ –∑–∞–∫–∞–∑–∞
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–æ–≤
5. **–≠–∫—Å–ø–æ—Ä—Ç QR** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ QR-–∫–æ–¥–∞ –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. QR-–∫–æ–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö** –∑–∞–∫–∞–∑–æ–≤
2. QR-–∫–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω **24 —á–∞—Å–∞**
3. –ü–æ—Å–ª–µ –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–∞ QR-–∫–æ–¥ **–∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è**
4. –ü–æ–≤–∞—Ä –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å –∑–∞–∫–∞–∑ **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑**
5. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **—Å–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã** —Å–æ —Å–∫–ª–∞–¥–∞

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### QR-–∫–æ–¥ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω (—Å—Ç–∞—Ç—É—Å "–æ–ø–ª–∞—á–µ–Ω")
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

### QR-–∫–æ–¥ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (24 —á–∞—Å–∞)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –±—ã–ª –ª–∏ –∑–∞–∫–∞–∑ —É–∂–µ –≤—ã–¥–∞–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö QR-–∫–æ–¥–∞

### –û—à–∏–±–∫–∞ –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–∞:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (–ø–æ–≤–∞—Ä/–∞–¥–º–∏–Ω)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–í–µ—Ä—Å–∏—è:** 1.0.0
**–î–∞—Ç–∞:** 28 —è–Ω–≤–∞—Ä—è 2026
