# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞.

## üîç –ü—Ä–∏—á–∏–Ω–∞

–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:
- `user.balance` –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `amount` –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞ –∏–∑ HTTP –∑–∞–ø—Ä–æ—Å–∞
- –°–ª–æ–∂–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –≤–º–µ—Å—Ç–æ —á–∏—Å–µ–ª –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É

–ù–∞–ø—Ä–∏–º–µ—Ä: `"1000" + "500"` = `"1000500"` –≤–º–µ—Å—Ç–æ `1500`

## üîß –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–æ —è–≤–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —á–∏—Å–ª–∞ —Å –ø–æ–º–æ—â—å—é `parseFloat()`.

**–î–æ:**
```javascript
const { amount } = req.body
const newBalance = user.balance + amount
```

**–ü–æ—Å–ª–µ:**
```javascript
const { amount } = req.body
const amountNum = parseFloat(amount)
const newBalance = parseFloat(user.balance || 0) + amountNum
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- –°—É–º–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ —Ç–µ–∫—É—â–µ–º—É –±–∞–ª–∞–Ω—Å—É
- –ë–∞–ª–∞–Ω—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- –°–µ—Å—Å–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º –±–∞–ª–∞–Ω—Å–æ–º

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∫–∞–∫ —É—á–µ–Ω–∏–∫

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000
2. –ù–∞–∂–º–∏—Ç–µ "–í—Ö–æ–¥ –¥–ª—è —É—á–µ–Ω–∏–∫–∞"
3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å:
   - Email: student@test.com
   - –ü–∞—Ä–æ–ª—å: student123
   - –ò–º—è: –ò–≤–∞–Ω
   - –§–∞–º–∏–ª–∏—è: –ò–≤–∞–Ω–æ–≤
   - –¢–µ–ª–µ—Ñ–æ–Ω: 79991234567
   - –ö–ª–∞—Å—Å: 10–ê
   - **–ö–æ–¥: 1111**
4. –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –±–∞–ª–∞–Ω—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: **1000 ‚ÇΩ**

### 2. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å

1. –í –ø–∞–Ω–µ–ª–∏ —É—á–µ–Ω–∏–∫–∞ –Ω–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–ë–∞–ª–∞–Ω—Å"
2. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å"
3. –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É: **500**
4. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–ø–æ–ª–Ω–∏—Ç—å"
5. ‚úÖ –ë–∞–ª–∞–Ω—Å –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å: **1500 ‚ÇΩ**

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –µ—â–µ —Ä–∞–∑

1. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –µ—â–µ –Ω–∞ **300 ‚ÇΩ**
2. ‚úÖ –ë–∞–ª–∞–Ω—Å –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å: **1800 ‚ÇΩ**

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
docker exec school-canteen-db psql -U canteen_user -d school_canteen -c "SELECT email, balance FROM users WHERE role = 'student';"
```

–ë–∞–ª–∞–Ω—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º, –∞ –Ω–µ —Å—Ç—Ä–æ–∫–æ–π.

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª
`server/routes/auth.js` - endpoint `/api/auth/topup`

### –ò–∑–º–µ–Ω–µ–Ω–∏—è
1. –î–æ–±–∞–≤–ª–µ–Ω–æ `parseFloat(amount)` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å—É–º–º—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
2. –î–æ–±–∞–≤–ª–µ–Ω–æ `parseFloat(user.balance || 0)` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞
3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç `null` –∑–Ω–∞—á–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é `|| 0`

### –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ
JavaScript –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–∏–ø—ã, –Ω–æ –ø—Ä–∏ —Å–ª–æ–∂–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–µ–π, –∞ –Ω–µ —Å—É–º–º–æ–π:
- `"1000" + "500"` = `"1000500"` ‚ùå
- `1000 + 500` = `1500` ‚úÖ

## ‚úÖ –°—Ç–∞—Ç—É—Å

- ‚úÖ –û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ
- ‚úÖ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

## üîÑ –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

–ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F5), –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å —Å–Ω–æ–≤–∞!

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 24 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
